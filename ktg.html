<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" id="theme-color">
    <title>Котики</title>
    <script src="https://telegram.org/js/telegram-web-app.js?58"></script>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: var(--tg-viewport-stable-height);
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: var(--tg-theme-bg-color);
            color: var(--tg-theme-text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        #content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: var(--tg-viewport-stable-height);
            overflow: hidden;
            opacity: 0;
            transform: scale(0.8);
            transition: opacity 0.5s ease, transform 0.5s ease;
            border-radius: 15px;
            padding: 10px;
            background-color: var(--tg-theme-secondary-bg-color);
        }
        #content.show {
            opacity: 1;
            transform: scale(1);
        }
        img {
            width: 100%;
            max-width: 100%;
            max-height: 400px;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        #cat-fact {
            margin-top: 10px;
            font-size: 16px;
            text-align: center;
            max-width: 600px;
            padding: 0 10px;
            color: var(--tg-theme-text-color);
        }
        #bottom-button, #telegram-link {
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            transition: transform 0.2s, background-color 0.3s, color 0.3s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        #bottom-button {
            background-color: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            position: fixed;
            bottom: calc(20px + var(--tg-safe-area-inset-bottom));
        }
        #telegram-link {
            background-color: transparent;
            color: var(--tg-theme-button-text-color);
            position: fixed;
            bottom: calc(20px + var(--tg-safe-area-inset-bottom));
            right: calc(20px + var(--tg-safe-area-inset-right));
            font-size: 16px;
            padding: 10px 20px;
        }
        #bottom-button:hover {
            transform: scale(1.1);
            background-color: var(--tg-theme-accent-text-color);
        }
        #telegram-link:hover {
            transform: scale(1.1);
            color: var(--tg-theme-accent-text-color);
        }
    </style>
</head>
<body>
    <div id="content">
        <img id="cat-image" alt="Изображение котика">
        <p id="cat-fact"></p>
    </div>
    <button id="bottom-button" onclick="showCatContent()" aria-label="Показать котика">Показать котика!</button>
    <button id="telegram-link" onclick="Telegram.WebApp.openTelegramLink('https://t.me/your_telegram_handle')" aria-label="Telegram автора">N</button>

    <script>
        // Локальный список фактов о котах на русском
        const catFacts = [
            "Кошки могут прыгать на высоту, превышающую их собственный рост в пять раз.",
            "У кошек около 230 костей в теле, что больше, чем у человека.",
            "Кошки спят в среднем 12-16 часов в день.",
            "Кошки могут издавать около 100 различных звуков.",
            "Усы кошек помогают им определять, пролезут ли они в узкое пространство.",
            "Кошки видят в темноте в шесть раз лучше, чем люди.",
            "Кошки могут поворачивать уши на 180 градусов.",
            "Сердце кошки бьется в два раза быстрее, чем у человека: от 110 до 140 ударов в минуту.",
            "Кошки не чувствуют сладкий вкус из-за особенностей их вкусовых рецепторов.",
            "Котята начинают видеть сны с возраста около одной недели.",            
            "Домашние кошки живут рядом с человеком уже более 9 тысяч лет",
            "Кошки слышат ультразвук, недоступный человеку",
            "Средняя продолжительность жизни домашней кошки — 12–15 лет",
            "Самая старая кошка прожила 38 лет",
            "У каждой кошки уникальный рисунок на носу",
            "Кошки спят около 70% своей жизни",
            "Кошка может развить скорость до 48 км/ч",
            "У кошки более 230 костей в теле",
            "Усы помогают кошкам ориентироваться в пространстве",
            "У кошек пять пальцев на передних лапах и четыре на задних",
            "В Древнем Египте кошек считали священными",
            "Сфинкс — порода кошек без шерсти",
            "Первая клонированная кошка называлась СС",
            "Кошки мурлыкают не только от удовольствия, но и при боли",
            "Мурлыканье помогает кошкам лечиться",
            "Кошки видят в темноте в 6 раз лучше человека",
            "Цвет глаз у котят меняется с возрастом",
            "Кошки не чувствуют сладкого вкуса",
            "Кошки пьют воду, зачерпывая её языком как ложкой",
            "У кошек отличное чувство равновесия",
            "Кошки способны запоминать до 100 разных лиц",
            "Кошки могут прыгать в 7 раз выше собственного роста",
            "Кошки способны разворачиваться в воздухе при падении",
            "Кошки потеют только через подушечки лап",
            "Сердце кошки бьётся в два раза быстрее человеческого",
            "Кошки могут различать до 150 запахов одновременно",
            "Домашние кошки произошли от африканской степной кошки",
            "Кошки могут узнавать своё имя",
            "Кошки используют хвост для выражения эмоций",
            "У кошек хорошие ночные охотничьи инстинкты",
            "Кошки часто приносят «добычу» хозяину как подарок",
            "Кошки видят мир в голубых и зелёных оттенках",
            "Усы кошек чувствительны к малейшему движению воздуха",
            "Кошки любят высокие места для обзора",
            "Кошки чаще всего правши или левши",
            "Кошки могут бегать зигзагами, чтобы избежать опасности",
            "Мурлыканье может успокаивать не только кошек, но и людей",
            "Кошки трепещут лапами, когда хотят поймать птицу",
            "Кошки узнают людей по голосу",
            "Кошки могут спать по 16 часов в сутки",
            "Кошки видят движения лучше, чем неподвижные предметы",
            "Вибриссы помогают кошкам ориентироваться в темноте",
            "Кошки могут быть как экстравертами, так и интровертами",
            "Кошки имеют очень гибкий позвоночник",
            "Кошки могут вытягивать когти только при необходимости",
            "Кошки любят тепло и ищут самые тёплые места",
            "Кошки лучше всего воспринимают низкие звуки",
            "Кошки используют запахи для общения",
            "Кошки могут узнавать настроение хозяина",
            "Кошки трясут хвостом, когда рады видеть хозяина",
            "Кошки не любят сильные запахи цитрусовых",
            "Кошки видят почти в полной темноте",
            "Кошки могут чувствовать землетрясения до их начала",
            "Кошки имеют индивидуальные привычки сна",
            "У кошек отличная краткосрочная память",
            "Кошки могут «говорить» с людьми с помощью мяуканья",
            "Кошки не мяукают друг с другом, только с людьми",
            "Кошки часто трутся о вещи, оставляя свой запах",
            "Кошки часто ложатся на ноутбуки из-за тепла",
            "Кошки могут вставать на задние лапы для обзора",
            "Кошки любят коробки и замкнутые пространства",
            "Кошки могут гнать воображаемую добычу",
            "Кошки иногда «разговаривают» с птицами щёлкающим звуком",
            "Кошки обожают играть с движущимися предметами",
            "Кошки могут узнавать себя в зеркале запахом",
            "Кошки часто спят, свернувшись клубком, чтобы сохранить тепло",
            "Кошки любят точить когти для метки территории",
            "Кошки часто охотятся в сумерках",
            "Кошки способны слышать частоты до 65 кГц",
            "Кошки видят мир менее ярким, чем люди",
            "Кошки бывают социальными или независимыми",
            "Кошки мурлыкают на частоте, полезной для костей",
            "Кошки могут прыгнуть на высоту до 2 метров",
            "Кошки любят сидеть на возвышенности",
            "Кошки могут узнавать время кормления",
            "Кошки могут воспитывать друг друга в группе",
            "Кошки могут учиться подражанием",
            "Кошки спят разными фазами сна, как люди",
            "Кошки умеют открывать двери лапами",
            "Кошки могут переносить новорождённых в зубах",
            "Кошки заботятся о чистоте больше, чем собаки",
            "Кошки могут издавать особый звук, требуя еду",
            "Кошки быстро привыкают к рутине",
            "Кошки могут обижаться на хозяина",
            "Кошки умеют открывать шкафы и ящики",
            "Кошки любят сидеть на плечах у хозяина",
            "Кошки могут менять поведение с возрастом",
            "Кошки всегда стараются приземлиться на лапы",
            "Кошки боятся громких звуков",
            "Кошки могут дружить с собаками",
            "Кошки любят солнечные лучи",
            "Кошки часто спят рядом с хозяином",
            "Кошки часто выбирают одного человека в доме",
            "Кошки издают тихое «трельканье» при приветствии",
            "Кошки могут мурлыкать даже во сне",
            "Кошки имеют индивидуальные предпочтения в еде",
            "Кошки иногда смотрят в одну точку без причины",
            "Кошки любят мягкие поверхности",
            "Кошки могут быть очень ревнивыми",
            "Кошки приносят радость и снижают стресс у человека",
            "Усы кошек помогают им определять, пролезут ли они в узкое пространство."
        ];

        // Инициализация Telegram Web App
        Telegram.WebApp.ready();
        Telegram.WebApp.expand(); // Разворачиваем Mini App на максимальную высоту

        // Обновление темы
        function updateTheme() {
            document.body.style.backgroundColor = Telegram.WebApp.themeParams.bg_color;
            document.body.style.color = Telegram.WebApp.themeParams.text_color;
            document.getElementById('content').style.backgroundColor = Telegram.WebApp.themeParams.secondary_bg_color;
            document.getElementById('bottom-button').style.backgroundColor = Telegram.WebApp.themeParams.button_color;
            document.getElementById('bottom-button').style.color = Telegram.WebApp.themeParams.button_text_color;
            document.getElementById('telegram-link').style.color = Telegram.WebApp.themeParams.button_text_color;
            // Устанавливаем цвет системных панелей (статус-бар и навигационная панель)
            Telegram.WebApp.setBackgroundColor(Telegram.WebApp.themeParams.bg_color);
            // Устанавливаем цвет статус-бара через мета-тег
            document.getElementById('theme-color').setAttribute('content', Telegram.WebApp.themeParams.bg_color);
        }

        // Подписка на изменение темы
        Telegram.WebApp.onEvent('themeChanged', updateTheme);
        updateTheme(); // Инициализация темы при загрузке

        async function showCatContent() {
            const contentDiv = document.getElementById('content');
            const catImage = document.getElementById('cat-image');
            const catFact = document.getElementById('cat-fact');

            // Тактильная обратная связь
            Telegram.WebApp.HapticFeedback.impactOccurred('medium');

            // Очищаем содержимое
            catImage.src = '';
            catFact.textContent = '';

            try {
                // Получаем случайное изображение с The Cat API
                const imageResponse = await fetch('https://api.thecatapi.com/v1/images/search?mime_types=jpg,png');
                if (!imageResponse.ok) throw new Error('Ошибка загрузки изображения');
                const imageData = await imageResponse.json();
                catImage.src = imageData[0].url;

                // Выбираем случайный факт из локального списка
                const randomFact = catFacts[Math.floor(Math.random() * catFacts.length)];
                catFact.textContent = randomFact;

                // Анимация появления
                contentDiv.classList.remove('show');
                setTimeout(() => contentDiv.classList.add('show'), 10);
            } catch (error) {
                console.error('Ошибка загрузки котика:', error.message);
                catFact.textContent = 'Ошибка загрузки изображения, попробуйте снова!';
            }
        }

        // Показываем котика и факт при загрузке страницы
        showCatContent();
    </script>
</body>
</html>
